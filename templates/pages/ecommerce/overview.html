{% extends 'layouts/base.html' %}
{% load static %}

{% block content %}
<style>
  .details-table2 {
    border-collapse: collapse;
    width: 100%;
  }
  
  .details-table2 th, .details-table2 td {
    border: 1px solid black; /* Borde para cada celda */
    padding: 10px;
    vertical-align: top;
  }

  .input-wide {
    width: 100%;
    box-sizing: border-box;
    margin-bottom: 8px;
  }

  h6 {
    margin: 0;
    display: inline;
    font-weight: normal;
  }

  label {
    font-weight: bold;
    margin-bottom: 4px;
    display: inline-block;
  }
  .input-full {
    width: 100%; /* Ocupa todo el ancho disponible de la celda */
    box-sizing: border-box; /* Incluye padding y border en el ancho total */
  }
  
  .table-cell {
    padding: 0; /* Elimina el relleno dentro de la celda */
  }
</style>
<style>
  .details-table1 {
    border-collapse: collapse; /* Elimina los espacios entre celdas */
    width: 100%; /* Ajusta según necesidades */
    border: 1px solid black; /* Borde alrededor de la tabla */
  }

  .details-table1 th, .details-table1 td {
    border: 1px solid black; /* Borde alrededor de las celdas */
    padding: 8px; /* Relleno para espacio interno */
    text-align: left; /* Alineación del texto */
  }

</style>
<style>
  .info-table,
  .details-table {
    width: 100%;
    border-collapse: collapse;
    margin: 20px 0;
  }

  .info-table td,
  .details-table td,
  .details-table th {
    border: 1px solid #ddd;
    padding: 8px;
  }

  .info-table td {
    width: 50%;
  }

  .details-table th {
    background-color: #f2f2f2;
  }

  .nav-link.active svg .color-background {
    fill: #CB0C9F;
    /* Color de los íconos SVG cuando están activos */
  }

  input[type="text"],
  input[type="email"] {
    box-sizing: border-box;
    padding: 5px;
    font-size: 14px;
    margin-top: 2px;
    border: none;
    /* Sin borde */
    outline: none;
    /* También quita el borde cuando el input está seleccionado */
    background-color: transparent;
    /* Fondo transparente */
  }

  .custom-link {
    text-decoration: none;
    color: inherit;
  }

  .custom-link:hover {
    background-color: hsl(0, 0%, 94%);
    /* Cambia el fondo al pasar el ratón */
    border-radius: 10px;
    /* Bordes redondeados */
  }

  .avatar {
    width: 100px;
    height: 100px;
    margin-right: 5px;
    /* Espacio entre las imágenes */
    object-fit: cover;
    /* Asegura que las imágenes mantengan su proporción */

  }

  .avatar1 {
    width: 150px;
    height: 150px;
    margin-right: 5px;
    /* Espacio entre las imágenes */
    object-fit: cover;
    /* Asegura que las imágenes mantengan su proporción */

  }

  .content-info {
    display: flex;
    flex-direction: column;
    justify-content: center;
  }

  .text-truncate {
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    max-width: 150px;
    /* Ajusta el ancho según el espacio que desees */
  }

  .avatar3d {
    width: 100px;
    height: 100px;
    margin-right: 1px;
    object-fit: cover;
    transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
    perspective: 1000px;
  }

  /* Efecto cuando el usuario pasa el ratón sobre la imagen */
  /* Efecto al hacer hover */
  .avatar3d:hover {
    transform: scale(1.2) perspective(500px) rotateX(10deg) rotateY(10deg);
    /* Añade una animación de flotación */
  }

  /* Efecto de selección */
  .avatar3d.selected {
    box-shadow: 0 0 10px 5px rgba(0, 123, 255, 0.5);
  outline: none;
  }

  /* Efecto flotante continuo */
  @keyframes float {
    0% {
      transform: perspective(600px) translateY(0px);
    }

    50% {
      transform: perspective(600px) translateY(-10px) rotateY(20deg) rotateX(10deg);
    }

    100% {
      transform: perspective(600px) translateY(0px);
    }

  }

#related-images .selected {
  border: 3px solid #007bff; /* Color de borde, puede ser cualquier color que prefieras */
  box-shadow: 0 0 10px rgba(0, 123, 255, 0.5); /* Sombra de resaltar */
  transition: all 0.3s ease; /* Suavizar la transición */
}
</style>
<div class="container mt-4">
  <!-- Barra de navegación con pestañas -->
  <div class="container-fluid mt-4">
    <div class="row align-items-center">
      <div class="col-lg-4 col-sm-8">
        <div class="nav-wrapper position-relative end-0">
          <ul class="nav nav-pills nav-fill p-1" role="tablist">
            <li class="nav-item">
              <a class="nav-link mb-0 px-0 py-1 active  active " data-bs-toggle="tab" href="#invoice" role="tab"
                aria-selected="true">
                Messages
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link mb-0 px-0 py-1 " data-bs-toggle="tab" href="#project-list" role="tab"
                aria-selected="false">
                Social
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link mb-0 px-0 py-1 " data-bs-toggle="tab" href="#settings" role="tab"
                aria-selected="false">
                Notifications
              </a>
            </li>
          </ul>
        </div>
      </div>
    </div>
  </div>
  <!-- Contenido de cada pestaña -->
  <div class="tab-content mt-3" id="myTabContent">
    <!-- Contenido de la pestaña "Invoice" -->
    <div class="container-fluid py-4 tab-pane fade show active" id="invoice" role="tabpanel"
      aria-labelledby="invoice-tab">
      <div class="row">
        <div class="col-4" id="selectable-images"><!-- aqui esta para selecionar las imagenes-->
          <div class="card blur shadow-blur max-height-vh-70 overflow-auto overflow-x-hidden mb-5 mb-lg-0">
            <div class="card-header p-3">
              <h6>Type</h6>
            </div>
            <div class="card-body p-2">
              <a href="javascript:;" class="">
                <div class="d-flex p-2 align-items-center image-selector">
                  <div class="text-center me-2">
                    <img alt="Image" src="{% static 'assets/img/1.png' %}" class="avatar3d  " data-id="1.1">
                    <span class="text-muted text-sm col-11 p-0 text-truncate d-block">
                      Inline
                    </span>
                  </div>
                  <div class="text-center me-2">
                    <img alt="Image" src="{% static 'assets/img/RightAngle.png' %}" class="avatar3d " data-id="1.2">
                    <span class="text-muted text-sm col-11 p-0 text-truncate d-block">
                      Right Angle
                    </span>
                  </div>
                  <div class="text-center">
                    <img alt="Image" src="{% static 'assets/img/Neo.png' %}" class="avatar3d "  data-id="1.3">
                    <span class="text-muted text-sm col-11 p-0 text-truncate d-block">
                      Neo
                    </span>
                  </div>
                </div>
              </a>
              <div class="card-header p-3">
                <h6>Doors</h6>
              </div>
              <a href="javascript:;" class="">
                <div class="image-selector d-flex p-2 align-items-center">
                  <!-- Contenedor de cada imagen con su nombre -->
                  <div class="text-center me-2">
                    <img alt="Image" src="{% static 'assets/img/Single.png' %}" class="avatar3d " data-id="2.1">
                    <span class="text-muted text-sm col-11 p-0 text-truncate d-block">
                      Single
                    </span>
                  </div>
                  <div class="text-center me-2">
                    <img alt="Image" src="{% static 'assets/img/1.png' %}" class="avatar3d " data-id="2.2">
                    <span class="text-muted text-sm col-11 p-0 text-truncate d-block">
                      Double
                    </span>
                  </div>
                  <div class="text-center">
                    <img alt="Image" src="{% static 'assets/img/Bifold.png' %}" class="avatar3d " data-id="2.3">
                    <span class="text-muted text-sm col-11 p-0 text-truncate d-block">
                      Bifold
                    </span>
                  </div>
                </div>
                <a href="javascript:;" class="s">
                  <div class="image-selector d-flex p-2 align-items-center">
                    <!-- Contenedor de cada imagen con su nombre -->
                    <div class="text-center me-2">
                      <img alt="Image" src="{% static 'assets/img/SingleSliding.png' %}" class="avatar3d " data-id="2.4">
                      <span class="text-muted text-sm col-11 p-0 text-truncate d-block">
                        Single Sliding
                      </span>
                    </div>
                    <div class="text-center me-2">
                      <img alt="Image" src="{% static 'assets/img/DoubleSliding.png' %}" class="avatar3d " data-id="2.5">
                      <span class="text-muted text-sm col-11 p-0 text-truncate d-block">
                        Double Sliding
                      </span>
                    </div>
                  </div>
                </a>
              <div class="card-header p-3">
                <h6>Hinges</h6>
              </div>
              <a href="javascript:;" class="">
                <div class="d-flex p-2 align-items-center">
                  <!-- Contenedor de cada imagen con su nombre -->
                  <div class="text-center me-2">
                    <img alt="Image" src="{% static 'assets/img/12.jpg' %}" data-id="12" class="avatar3d ">
                    <span class="text-muted text-sm col-11 p-0 text-truncate d-block">
                      HANDLES
                    </span>
                  </div>
                  <div class="text-center me-2">
                    <img alt="Image" src="{% static 'assets/img/13.jpg' %}" class="avatar3d " data-id="13">
                    <span class="text-muted text-sm col-11 p-0 text-truncate d-block">
                      HANDLES
                    </span>
                  </div>
                </div>
              </a>
            </div>
          </div>
        </div>

        <!-- Contenedor de la otra Card -->
        <div class="col-8">
          <div class="card blur shadow-blur max-height-vh-70">
            <div class="card-body overflow-auto overflow-x-hidden">
              <div class="row justify-content-start mb-4">
                <div class="d-flex p-2 align-items-center" id="related-images">
                
                </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Contenido de la pestaña "Project List" -->
    <!-- Asegúrate de agregar las clases mencionadas abajo a tu archivo CSS para aplicar los estilos correctos -->

<div class="container-fluid my-3 py-3 tab-pane fade" id="project-list" role="tabpanel" aria-labelledby="project-list-tab">
  <div class="row">
    <div class="col-md-8 col-sm-10 mx-auto">
      <form action="{% url 'generate_pdf' %}" method="get">
        {% csrf_token %}
        <div class="card my-sm-5 position-relative transform-transition">
          <div class="card-header text-center position-relative header-size">
            <div class="row justify-content-between">
              <div class="navbar-brand m-0">
                <img class="mb-2 w-25 p-2" src="{% static 'assets/img/imagen_01.png' %}" alt="Logo">
                <h6>S89 Montauk Hwy. Copiague NY 11726</h6>
                <p class="d-block text-secondary">tel: 631-842-2515 631-842-2780 fx</p>
                <p class="d-block text-secondary">www.omgshowerdoors.com</p>
              </div>
            </div>
            <div class="card-body">
              <div class="row">
                <div class="col-12">
                  <div class="table-responsive">
                    <table class="details-table">
                      <tr>
                        <th colspan="2">SHIP TO</th>
                        <th colspan="2">BILL TO</th>
                      </tr>
                      <tr>
                        <td><label for="ship-name"><h6>Name:</h6></label></td>
                        <td><input type="text" id="ship-name" value="Dan Ferrara" class="input-wide"></td>
                        <td><label for="bill-company"><h6>Company:</h6></label></td>
                        <td><input type="text" id="bill-company" value="[Your Company]" class="input-wide"></td>
                      </tr>
                      <tr>
                        <td><label for="ship-address"><h6>Address:</h6></label></td>
                        <td><input type="text" id="ship-address" value="1805 Laurel Way" class="input-wide"></td>
                        <td><label for="bill-address"><h6>Address:</h6></label></td>
                        <td><input type="text" id="bill-address" value="[Your Address]" class="input-wide"></td>
                      </tr>
                      <tr>
                        <td><label for="ship-city"><h6>City:</h6></label></td>
                        <td><input type="text" id="ship-city" value="Mattituck, NY" class="input-wide"></td>
                        <td><label for="bill-city"><h6>City:</h6></label></td>
                        <td><input type="text" id="bill-city" value="Mattituck, NY" class="input-wide"></td>
                      </tr>
                      <tr>
                        <td><label for="ship-cell"><h6>Cell:</h6></label></td>
                        <td><input type="text" id="ship-cell" value="914-659-0362" class="input-wide"></td>
                        <td><label for="bill-phone"><h6>Phone:</h6></label></td>
                        <td><input type="text" id="bill-phone" value="[Your Phone Number]" class="input-wide"></td>
                      </tr>
                      <tr>
                        <td><label for="ship-email"><h6>Email:</h6></label></td>
                        <td><input type="email" id="ship-email" value="danfer@verizon.net" class="input-wide"></td>
                        <td><label for="bill-email"><h6>Email:</h6></label></td>
                        <td><input type="email" id="bill-email" value="danfer@verizon.net" class="input-wide"></td>
                      </tr>
                    </table>
                    <table class="details-table">
                      <tr>
                        <th>Handle</th>
                        <td><input type="text" id="handle" value="N/A" class="input-full"></td>
                        <th>Hardware Finish</th>
                        <td><input type="text" id="hardware-finish" value="Polished Chrome" class="input-full"></td>
                      </tr>
                      <tr>
                        <th>Glass Type</th>
                        <td><input type="text" id="glass-type" value="Low Iron" class="input-full"></td>
                        <th>Door Thickness</th>
                        <td><input type="text" id="door-thickness" value="N/A" class="input-full"></td>
                      </tr>
                      <tr>
                        <th>Stationary Panel</th>
                        <td colspan="3">
                          <input type="text" id="stationary-panel" value="Low Iron" class="input-full">
                        </td>
                      </tr>
                    </table>
                    <h4>Project Details</h4>
                    <table class="info-table">
                      <tr>
                        <td>
                          <strong>SHIP TO:</strong><br>
                          <div class="position-relative input-with-image">
                            <img id="selected-image-1" src="" alt="Name" class="image-adjusted">
                            <input type="text" id="ship-name-left" placeholder="Medida1" class="input-small position-absolute">
                            <input type="text" id="ship-name-center" placeholder="Medida2" class="input-medium position-absolute">
                            <input type="text" id="ship-name-right" placeholder="Medida3" class="input-tiny position-absolute">
                          </div>
                        </td>
                        <td>
                          <strong>SHIP TO:</strong><br>
                          <div class="position-relative input-with-image">
                            <img id="selected-image-2" src="" alt="Name" class="image-adjusted">
                            <input type="text" id="ship-name-left" placeholder="Medida1" class="input-small position-absolute">
                            <input type="text" id="ship-name-center" placeholder="Medida2" class="input-medium position-absolute">
                            <input type="text" id="ship-name-right" placeholder="Medida3" class="input-tiny position-absolute">
                          </div>
                        </td>
                      </tr>
                    </table>
                    <input type="text" id="height" name="height" class="form-control" placeholder="Description">
                   <br>
                    <table class="details-table1">
                      <tr>
                        <th colspan="2" style="width: 352.17px; border-right: none;" data-selected="true" data-label-id="0">
                          Cost Breakdown
                        </th>
                      </tr>
                      <tr>
                        <th scope="col">Description</th>
                        <th scope="col">Amount</th>
                      </tr>
                      <tr>
                        <td>Low Iron Glass</td>
                        <td>$2,300</td>
                      </tr>
                      <tr>
                        <td>50% Deposit</td>
                        <td>$1,150</td>
                      </tr>
                      <tr>
                        <td>Balance</td>
                        <td>$1,150</td>
                      </tr>
                    </table>
                <br>
                    <table class="details-table1">
                      <tr>
                        <th h4="col" style="width: 352.17px; " data-selected="true" 
                        data-label-id="0" >Balance to be paid in cash or Cheks </th>
                        <td>
                          <ul class="list-group">
                            <li class="list-group-item border-0 px-0">
                              <div class="form-check form-switch ps-0">
                                <input class="form-check-input ms-auto" type="checkbox" id="flexSwitchCheckDefault3">
                                <label class="form-check-label text-body ms-3 text-truncate w-80 mb-0" for="flexSwitchCheckDefault3">Credit card payment</label>
                              </div>
                            </li>
                            <li class="list-group-item border-0 px-0">
                              <div class="form-check form-switch ps-0">
                                <input class="form-check-input ms-auto" type="checkbox" id="flexSwitchCheckDefault4" checked="">
                                <label class="form-check-label text-body ms-3 text-truncate w-80 mb-0" for="flexSwitchCheckDefault4">Cash payment</label>
                              </div>
                            </li>
                          </ul>
                        </td>
                      </tr>
                      <tr>
                        <th scope="col">Description</th>
                        <th scope="col">Date</th>
                      </tr>
                      <tr>
                        <td>CONTRACT APROVED</td>
                        <td><input type="date" id="bill-email" value="" placeholder="Date" class="input-wide"></td>
                      </tr>
                      <tr>
                        <td>WORK COMPLETED SASTIFACTION</td>
                        <td><input type="date" id="bill-email" value="" placeholder="Date" class="input-wide"></td>
                      </tr>
        
                    </table>
                     <button class="btn bg-gradient-info mt-lg-7 mb-0" type="submit" name="button">Print</button>
                      
                  </div>
                </div>
              </div>
            </div>
           
          </div>
      </form>
    </div>
  </div>
</div>

    <!-- Contenido de la pestaña "Settings" -->
    <div class="tab-pane fade" id="settings" role="tabpanel" aria-labelledby="settings-tab">
      <h3>Settings</h3>
      <p>Contenido relacionado con Settings.</p>
    </div>
  </div>
  {% include 'includes/footer.html' %}

</div>


<script>
 const selectableImages = document.getElementById('selectable-images');
const relatedImagesContainer = document.getElementById('related-images');
const selectedImageDest1 = document.getElementById('selected-image-1'); // Contenedor para la imagen 1
const selectedImageDest2 = document.getElementById('selected-image-2'); // Contenedor para la imagen 2
const selectedImages = new Set(); // Usamos un Set para evitar duplicados
let selectedImagesArray = []; // Para almacenar las imágenes seleccionadas

// Evento para seleccionar las imágenes principales
selectableImages.addEventListener('click', (event) => {
  const img = event.target;

  if (img.tagName === 'IMG') {
    const imgId = img.dataset.id;

    // Añadir o quitar la imagen seleccionada
    if (selectedImages.has(imgId)) {
      selectedImages.delete(imgId);
      img.classList.remove('selected');
    } else if (selectedImages.size < 2) {
      selectedImages.add(imgId);
      img.classList.add('selected');
      console.log(selectedImages);
    }

    // Mostrar imágenes relacionadas si hay dos seleccionadas o si la imagen tiene data-id "12" o "13"
    if (selectedImages.size === 2 || imgId === '12' || imgId === '13') {
      showRelatedImages([...selectedImages]);
    } else {
      relatedImagesContainer.innerHTML = ''; // Limpiar las imágenes relacionadas
    }
  }
});

// Función para mostrar imágenes relacionadas
function showRelatedImages(selected) {
  relatedImagesContainer.innerHTML = ''; // Limpiar imágenes previas

  const relatedImages = {
    '1.1-2.1': ["{% static 'assets/img/4.jpg' %}", "{% static 'assets/img/3.jpg' %}","{% static 'assets/img/4.jpg' %}", "{% static 'assets/img/3.jpg' %}"],
        '1.1-2.2': ["{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}","{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}"],
        '1.1-2.3': ["{% static 'assets/img/6.png' %}", "{% static 'assets/img/6.png' %}","{% static 'assets/img/6.png' %}", "{% static 'assets/img/6.png' %}"],
        '1.1-2.4': ["{% static 'assets/img/Single.png' %}", "{% static 'assets/img/Single.png' %}","{% static 'assets/img/Single.png' %}", "{% static 'assets/img/Single.png' %}"],
        '1.1-2.5': ["{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}","{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}"],

        '1.2-2.1': ["{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}","{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}"],
        '1.2-2.2': ["{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}","{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}"],
        '1.2-2.3': ["{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}","{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}"],
        '1.2-2.4': ["{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}","{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}"],
        '1.2-2.5': ["{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}","{% static 'assets/img/3.jpg' %}", "{% static 'assets/img/3.jpg' %}"],

        '1.3-2.1': ["{% static 'assets/img/2.jpg' %}", "{% static 'assets/img/2.jpg' %}","{% static 'assets/img/2.jpg' %}", "{% static 'assets/img/2.jpg' %}"],
        '1.3-2.2': ["{% static 'assets/img/2.jpg' %}", "{% static 'assets/img/2.jpg' %}","{% static 'assets/img/2.jpg' %}", "{% static 'assets/img/2.jpg' %}"],
        '1.3-2.3': ["{% static 'assets/img/2.jpg' %}", "{% static 'assets/img/2.jpg' %}","{% static 'assets/img/2.jpg' %}", "{% static 'assets/img/2.jpg' %}"],
        '1.3-2.4': ["{% static 'assets/img/2.jpg' %}", "{% static 'assets/img/2.jpg' %}","{% static 'assets/img/2.jpg' %}", "{% static 'assets/img/2.jpg' %}"],
        '1.3-2.5': ["{% static 'assets/img/2.jpg' %}", "{% static 'assets/img/2.jpg' %}","{% static 'assets/img/2.jpg' %}", "{% static 'assets/img/2.jpg' %}"],

        '12': ["{% static 'assets/img/14.jpg' %}", "{% static 'assets/img/15.gif' %}","{% static 'assets/img/16.gif' %}", "{% static 'assets/img/17.jpg' %}"],
        '13': ["{% static 'assets/img/14.jpg' %}", "{% static 'assets/img/15.gif' %}","{% static 'assets/img/16.gif' %}", "{% static 'assets/img/17.jpg' %}"],
    // Agrega más combinaciones aquí
  };

  const key = selected.sort().join('-');
  const imagesToShow = relatedImages[key] || [];

  imagesToShow.forEach(src => {
    // Crear un nuevo contenedor para cada imagen relacionada
    const div = document.createElement('div');
    div.classList.add('text-center', 'me-2');

    const img = document.createElement('img');
    img.src = src;
    img.alt = '3D Avatar';
    img.classList.add('avatar3d');

    // Añadir un evento para seleccionar solo una imagen de las relacionadas
    img.addEventListener('click', function() {
      // Desmarcar cualquier imagen previamente seleccionada
      const previouslySelected = document.querySelector('#related-images img.selected');
      if (previouslySelected) {
        previouslySelected.classList.remove('selected');
      }

      // Seleccionar la imagen actual
      img.classList.add('selected');

      // Actualizar las imágenes de destino con las imágenes seleccionadas
      if (selectedImagesArray.length < 2) {
        selectedImagesArray.push(src);
      }

      if (selectedImagesArray.length === 1) {
        selectedImageDest1.src = src; // Cambiar el src de la primera imagen
      } else {
        selectedImageDest2.src = src; // Cambiar el src de la segunda imagen
      }
    });

    div.appendChild(img);
    relatedImagesContainer.appendChild(div);
  });
}


</script>
{% endblock content %}